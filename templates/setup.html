<!DOCTYPE html>
<html>
<head>
<title>Monitoring Setup</title>
<style>
body {font-family:Arial; margin:40px;}
.card {background:#f4f4f4; padding:20px; border-radius:10px; margin-bottom:20px;}
button {padding:10px; margin-top:10px;}
</style>
</head>

<body>

<h1>âš™ Monitoring Settings</h1>

<div class="card">
<label>
Alert Threshold:
<input id="threshold" type="number" step="0.1" value="0.6">
</label>
<br>
<button onclick="saveSettings()">Save</button>
</div>

<h2>ðŸ“Š Detection Statistics</h2>
<div id="stats"></div>

<script>
async function saveSettings(){
  const threshold=document.getElementById("threshold").value;

  await fetch("/api/settings",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      parent_consent:1,
      monitoring_enabled:1,
      alert_threshold:threshold
    })
  });

  alert("Saved");
}

async function loadStats(){
  const res=await fetch("/api/stats");
  const data=await res.json();

  document.getElementById("stats").innerHTML=`
    <p>Total Alerts: ${data.total_alerts}</p>
    <pre>${JSON.stringify(data.risk_breakdown,null,2)}</pre>
  `;
}

loadStats();
setInterval(loadStats,5000);
</script>

</body>
</html>
